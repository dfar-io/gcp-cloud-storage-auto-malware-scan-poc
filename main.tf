resource "google_storage_bucket" "intake" {
  project       = local.project
  name          = "malware-scanner-intake"
  location      = local.location
  force_destroy = true

  uniform_bucket_level_access = true
}

data "google_storage_project_service_account" "gcs_account" {
    project = local.project
}
resource "google_project_iam_member" "pubsubpublisher" {
  project = local.project
  role    = "roles/pubsub.publisher"
  member  = "serviceAccount:${data.google_storage_project_service_account.gcs_account.email_address}"
}